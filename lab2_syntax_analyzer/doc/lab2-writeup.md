# Lab 2
## 设计
Bison 的产生式写法和 CMINUS.md 中的类似.

对于语法树的处理, 只需要在要规约的时候新建一个节点, 把产生式右边的每一个符号做为节点的孩子就可以了, 主要是一些重复性的工作.

> 过滤词法分析中无用的词法符号

只需将 `return ...` 放在一个 `#ifdef LAB1_ONLY` 的块中就可以.

> 二义性文法

在 `cmake` 中使用 `VERBOSE` 选项可以看到 `bison` 生成的自动机和具体的冲突细节. 其实不需要处理, 因为 `bison` 在移进和规约之间选择了正确的一个, 就是有一个 warning. 具体的解决办法参考了 http://210.45.114.30/gbxu/notice_board/issues/62#note_541.

## 遇到的问题
一开始没有把 `ERROR` 这个 token 加上, 导致不论所有的程序都会报语法错误, 加上之后就好了.

词法分析文件里面包含 `yylval` 的部分没有使用 `LAB1_ONLY` 包起来, `make` 的时候总是报错 (其实是 `test_lex` 在报错, 但是我一直以为是语法分析的部分什么东西写错了, 花了不少时间), 最后看了看 issue 找到了解决方法.
